# Sakaimachi Bus Mini – Product Vision & Roadmap

このドキュメントは境町バスミニが「今後どのようにあるべきか」を定義し、その未来像と現状のギャップを埋めるためのアクションを整理したものです。Codex エージェントが参照し、施策方針や優先順位を共有することを目的とします。

## 1. ビジョン
- **境町エリアの移動体験を支える信頼できるダッシュボード**: 時刻表だけでなく、運行状況・振替情報・乗り場案内など、利用者が知りたい情報をワンストップで提供する。
- **モバイルファースト & オフラインフレンドリー**: 通勤・通学利用者がトンネルや通信不安定な環境でも閲覧できる体験を重視。ホーム画面追加やPush通知など、日常的な利用を支える仕組みを整える。
- **地域共創プラットフォーム**: 自治体や運行事業者との連携を想定し、公式データとの同期やお知らせ配信がシームレスに行える構造を目指す。
- **データドリブンな改善サイクル**: 利用ログ・検索クエリ・コンバージョンを継続的に計測し、改善につなげる。

## 2. 重点領域とゴール
| 領域 | ゴール | 成功指標 (例) |
|------|--------|----------------|
| UX / UI | ユーザーが迷わず必要情報に到達できる | 主要操作のタップ数、セッション継続率、ヒートマップのスクロール完遂率 |
| パフォーマンス | 3G 環境でも2秒以内にコンテンツを表示 | Lighthouse Performance 90+, LCP < 2.5s |
| SEO | 境町バス関連キーワードで検索上位に表示 | Search Console の対象キーワード CTR / 平均掲載順位 |
| コンテンツ | 正確で新鮮、文脈のある情報を提供 | 更新頻度、FAQ閲覧数、滞在時間 |
| PWA / オフライン | ホーム画面追加とオフライン閲覧を実現 | PWA Audit 100% / インストール率 |
| データ計測 & 運用 | 改善サイクルを回せるログ基盤を整備 | GA4/GTM 導入、ダッシュボード整備 |

## 3. 未来と現状のギャップ
### 3.1 UX / UI
- **現状**: フラットテーマで情報整理は進んだが、乗り換え導線や補助情報の深さが不足。
- **課題**:
  - 乗車前後の「関連タスク」（乗り換え、運賃、座席情報）にすぐアクセスできない。
  - フィードバック導線（不具合申告・改善要望）が明示されていない。
  - 色覚多様性テストが未実施。

### 3.2 パフォーマンス / アクセシビリティ
- **現状**: ビルドは安定。Lighthouse 計測は未実施。フォーカスリング・ARIA 属性は概ね整備済みだが検証不足。
- **課題**:
  - critical CSS / lazy load 未最適化。Hero のカウントダウンで CPU 負荷が高まる可能性。
  - 色コントラストの自動チェック（Pa11y 等）が未導入。

### 3.3 SEO / コンテンツ
- **現状**: Structured Data、FAQ/Guide ページ追加、ルート別ランディングあり。
- **課題**:
  - ロングテールキーワード向けのブログ/ニュース的コンテンツがない。
  - 動的データ（遅延・運休）の取得がないため、検索意図の「リアルタイム情報」に応えられていない。
  - E-E-A-T を裏付ける運営者情報（公式の信頼性担保）が限定的。

### 3.4 PWA / オフライン体験
- **現状**: Home screen 追加の説明はあるが Service Worker は未導入。
- **課題**:
  - オフラインキャッシュ、更新バナー、Web App Manifest の最適化が未実装。
  - Push通知やバックグラウンド同期の検討余地。

### 3.5 データ連携 / CMS
- **現状**: `timetable.sample.json` を静的に保持。更新は手動。
- **課題**:
  - 自治体やGoogleスプレッドシートとの同期手段がない。
  - 今後の多言語展開も考慮するとCMS化が必要。

### 3.6 計測・運用
- **現状**: GA/GTM 導入コンポーネントは準備済みだが、ID 未設定。
- **課題**:
  - KPI ダッシュボードがない。
  - エラーロギング（Sentry 等）が未導入。

## 4. ギャップを埋めるためのロードマップ（案）
### 4.1 直近 (1〜2 か月)
1. **UX Quick Win**
   - トップに「よく使う導線」セクションを追加（乗り換え案内リンク、料金ガイド等）。
   - フィードバックフォーム or GitHub Issue リンクをフッターに設置。
   - 色覚コントラストテスト (Chrome DevTools / Stark 等) を実施し、必要に応じて配色微調整。
2. **SEO 強化**
   - 乗り場写真やアクセスガイドなどのリッチコンテンツをGuideページに追加。
   - OG画像のバリエーションを自動生成スクリプト（`gen:og`）で更新、SNSシェアを最適化。
3. **計測整備**
   - GA4 / GTM の Measurement ID を環境変数で設定。
   - 主要導線（方向切替、共有/コピー、FAQ閲覧など）にイベント計測を追加。

### 4.2 中期 (3〜6 か月)
1. **PWA 対応**
   - `@astrojs/pwa` などを導入し、Service Workerでオフラインキャッシュ・アップデート通知を実装。
   - Web App Manifest のアイコン/テーマカラーを最新ガイドラインに合わせて整備。
2. **動的データ連携**
   - Google スプレッドシート or CMS から時刻表を定期取得するスクリプトを用意し、デプロイ時にビルドする仕組みを構築。
   - 運行事業者の公式RSS / Twitter 等から遅延情報を収集し、トップでインサート表示。
3. **アクセシビリティ監査**
   - Lighthouse CI や Pa11y を導入してPRごとに自動チェック。
   - スクリーンリーダー検証 (NVDA, VoiceOver) を実施し、ARIA属性の改善を継続。

### 4.3 長期 (6 か月〜)
1. **多言語展開**
   - 英語ページ（観光客向け）や中国語ページを追加し、`hreflang` を整備。
   - 翻訳管理フロー（i18nライブラリ or CMS）を導入。
2. **利用者向けダッシュボード**
   - お気に入り便の保存、Push通知による運行アラート、予約・チケット情報へのリンクなどを提供。
   - 利用者の現在地に応じた最近の停留所を表示（ブラウザ Geolocation API）。
3. **地域連携**
   - 自治体サイトから公式リンクを獲得（被リンクによるSEO強化）。
   - コミュニティ/運行担当者向けに簡単に時刻更新できる管理UIを提供。

## 5. 次のステップ
- Core Team でビジョンとロードマップをレビューし、優先度を確定。
- Issue トラッカー（GitHub Projects 等）に上記タスクを落とし込み、進捗管理を行う。
- PWA / CMS など大規模な変更は PoC を小規模に実施し、ビジネス影響を評価してから導入する。

---
今後、本ドキュメントは四半期ごとに見直し、施策の進捗を反映する。更新時は Pull Request に本ファイルの差分を必ず含め、プロダクトの未来像が常に共有される状態を保つ。
