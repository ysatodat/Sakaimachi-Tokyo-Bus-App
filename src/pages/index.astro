---
import "../styles/global.css";
import App from "../components/App.tsx";

// ✅ 本番URLは環境変数で切替（既定は GitHub Pages 用）
const site = import.meta.env.PUBLIC_SITE_URL ?? 'https://ysatodat.github.io';
const base = import.meta.env.PUBLIC_BASE_PATH ?? '/Sakaimachi-Tokyo-Bus-App/';
const siteUrl = new URL(base, site).toString();
const favIcon = siteUrl + 'favicon.svg';
const appleIcon = siteUrl + 'apple-touch-icon.png';

const title = "境町 ↔ 東京 高速バス（ミニ時刻・次発表示）";
const description = "境町と東京（王子駅/東京駅）を結ぶ高速バスの次発・以降・始発/終バスを素早く確認。";
const ogImage = siteUrl + "og.png";
---
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content={description} />
    <meta name="robots" content="index,follow" />
    <link rel="canonical" href={siteUrl} />

    <!-- ✅ OGP -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={siteUrl} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={ogImage} />
    <meta property="og:locale" content="ja_JP" />

    <!-- ✅ Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={ogImage} />

    <!-- JSON-LD（既存） -->
    <script type="application/ld+json">
      {JSON.stringify({
        "@context":"https://schema.org",
        "@type":"WebApplication",
        name:"境町 ↔ 東京 高速バス ミニ",
        applicationCategory:"TravelApplication",
        operatingSystem:"Web",
        url: siteUrl, // ← ここも本番URL
        description:"境町と東京（王子駅/東京駅）を結ぶ高速バスの次発・以降・始発/終バスを素早く確認。",
        inLanguage:"ja"
      })}
    </script>
  </head>
  <body>
    <App client:load />
  </body>
</html>
    <link rel="icon" href={favIcon} type="image/svg+xml" />
    <link rel="apple-touch-icon" sizes="180x180" href={appleIcon} />
